# Hidden captcha for Laravel 5

![Package](https://img.shields.io/badge/Package-sebastienheyd%2Fhidden--captcha-yellowgreen.svg)
![Laravel](https://img.shields.io/badge/For-Laravel%205.x-yellow.svg)
![Release](https://img.shields.io/github/release/sebastienheyd/hidden-captcha.svg)
![Nb downloads](https://img.shields.io/packagist/dt/sebastienheyd/hidden-captcha.svg)
![Packagist](https://img.shields.io/packagist/v/sebastienheyd/hidden-captcha.svg)
![License](https://img.shields.io/github/license/sebastienheyd/hidden-captcha.svg)

Spam protection solution for Laravel 5.x. Based on several strategies to block the vast majority of spam bots without interfering with the user experience.

## How does it work?

HiddenCaptcha will use four checks to block spam robots :

- "honeypot" : a field hidden via CSS that does not have to be filled in
- a encrypted token containing the user's IP, session id, user agent and a random string
- a required field named randomly (uses the random string in the token)
- time limit

## Does it work in any cases ?

No, this solution can be countered by retrieving data from fields by parsing HTML. After retrieving the data and the session token, it is possible to use Curl to post the form with the data generated by HiddenCaptcha.

## Installation

```json
composer require sebastienheyd/hidden-captcha
```

Extra steps for Laravel < 5.5 :

- Add `SebastienHeyd\HiddenCaptcha\HiddenCaptchaServiceProvider::class,` at the end of the `provider` array in `config/app.php`
- Add `"HiddenCaptcha" => SebastienHeyd\HiddenCaptcha\Facades\HiddenCaptcha::class,` at the end of the `aliases` array in `config/app.php`

## Usage

1. In your form, in the blade view :

```
@hiddencaptcha
```


2. To check your form, add the following validation rule:
```php
'captcha' => 'hiddencaptcha'
```

## Options

#### Changing time limits

By default, the time limits for submitting a form are 0 second minimum to 1200 seconds maximum (10 minutes). Beyond that, hiddencaptcha will not validate the form.

These limits can be changed by declaring them in the validation rule, for example:

`$rules = ['captcha' => 'required|hiddencaptcha:5,2400'];`

#### Change the name of the field that must be empty

It is possible to change the name of the field that must be empty. If it does not conflict with an existing field in your form, it is recommended that you enter a "tempting" name for the bots. Indeed, bots will be more likely to fill in a field called "name" than "_username" (default).

```html
@hiddencaptcha('name')
```